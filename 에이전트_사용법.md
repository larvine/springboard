# 🤖 AI 뉴스레터 에이전트 사용법

## 🎯 이게 뭔가요?

AI가 자동으로 블로그 포스트를 분석하고, 선택하고, 요약해서 뉴스레터를 만들어주는 똑똑한 프로그램입니다!

**기존 방식 vs AI 에이전트:**

| 기존 방식 | AI 에이전트 |
|---------|-----------|
| 수동으로 포스트 선택 | ✅ AI가 자동 선택 |
| 직접 요약 작성 | ✅ AI가 요약 생성 |
| 제목 고민 | ✅ AI가 제목 생성 |
| 매주 직접 실행 | ✅ 자동 스케줄 실행 |

## ⚡ 빠른 시작 (5분)

### 1단계: 설치

```bash
# 자동 설치
chmod +x install_agent.sh
./install_agent.sh
```

### 2단계: OpenAI API 키 설정

```bash
# API 키 입력 (https://platform.openai.com/api-keys 에서 발급)
export OPENAI_API_KEY='sk-...'

# 영구 저장하려면
echo 'export OPENAI_API_KEY="sk-..."' >> ~/.bashrc
source ~/.bashrc
```

### 3단계: 실행!

```bash
# AI가 알아서 뉴스레터 생성
python3 newsletter_agent.py --auto
```

끝! 🎉

## 🎮 사용 방법

### 모드 1: 완전 자동 (추천!)

```bash
python3 newsletter_agent.py --auto
```

**AI가 하는 일:**
1. 📚 최근 30일 포스트 검색
2. 🧠 각 포스트 분석 및 점수 매기기
3. 🎯 점수 높은 순으로 자동 선택
4. ✍️ 각 포스트 요약 생성
5. 📝 뉴스레터 제목 생성
6. 💾 파일 저장

**실행 예시:**
```
🤖 AI 뉴스레터 에이전트
================================

📚 15개의 후보 포스트를 찾았습니다.

🤖 AI가 포스트를 분석하고 선택하는 중...
   분석 중 (1/15): GPT-5 출시...
   ...

✅ 선택 완료:
   📌 Wide: GPT-5 출시 (점수: 95)
   📊 Grid: 구글 양자컴퓨터 (88점)
   📊 Grid: 애플 Vision Pro (85점)
   ...

✍️  AI가 요약 생성 중...
📝 AI가 제목 생성 중...

✅ 완료!
   파일: _posts/2025-10-21-newsletter.md
```

### 모드 2: AI 추천받기

```bash
python3 newsletter_agent.py --interactive
```

1. `2) AI 추천 + 수동 선택` 선택
2. AI가 분석한 추천 순위 확인
3. 원하는 포스트 번호 입력
4. 완료!

**언제 사용?**
- AI 추천을 보고 싶지만 직접 고르고 싶을 때
- 특정 포스트를 제외하고 싶을 때

### 모드 3: 자동 스케줄 (매주 자동 생성)

```bash
# 쉬운 방법: 대화형 설정
chmod +x setup_cron.sh
./setup_cron.sh

# 1번 선택: 매주 월요일 오전 9시
```

**이제 매주 월요일 9시마다 자동으로 뉴스레터가 생성됩니다!** 🎉

## 🔧 설정하기

`newsletter_agent_config.yaml` 파일을 열어서 수정:

```yaml
# AI 설정
ai_provider: openai           # openai 또는 anthropic
ai_model: gpt-4o-mini        # 모델 선택
ai_api_key: null             # null = 환경변수 사용

# 동작 설정
auto_select: true            # AI 자동 선택
auto_summarize: true         # AI 자동 요약
max_wide_items: 1            # 큰 카드 개수
max_grid_items: 4            # 작은 카드 개수

# 후보 범위
candidate_days: 30           # 최근 30일
```

## 💰 비용

### GPT-4o-mini (권장)

- **주간 뉴스레터**: 약 **30원** ($0.02)
- **월간 비용**: 약 **120원** ($0.08)

엄청 저렴합니다! ☕ 커피 한 잔 값도 안됩니다.

### 비용 줄이기

```yaml
# 후보 포스트 줄이기
candidate_days: 14

# 선택 개수 줄이기
max_wide_items: 1
max_grid_items: 3
```

## 🎯 실전 예시

### 예시 1: 주간 AI 뉴스레터

```bash
# 매주 월요일 오전 9시 자동 생성
./setup_cron.sh
# → 1번 선택

# 테스트 실행
python3 newsletter_agent.py --auto
```

### 예시 2: 월간 종합 뉴스레터

```yaml
# newsletter_agent_config.yaml 수정
candidate_days: 30
max_wide_items: 2
max_grid_items: 8
```

```bash
# Crontab 설정 (매월 1일)
crontab -e

# 추가
0 10 1 * * cd /path/to/blog && python3 newsletter_agent.py --auto
```

### 예시 3: AI 추천받아 직접 선택

```bash
# 매주 금요일에 직접 실행
python3 newsletter_agent.py --interactive

# 모드 2 선택
# AI 추천 확인
# 원하는 것만 골라서 생성
```

## 🐛 문제 해결

### 1. "OpenAI API key not found"

```bash
# API 키 확인
echo $OPENAI_API_KEY

# 설정 안되어 있으면
export OPENAI_API_KEY='your-api-key'
```

### 2. "후보 포스트가 없습니다"

```yaml
# 범위를 늘려보세요
candidate_days: 60  # 30 → 60
```

### 3. "템플릿을 찾을 수 없습니다"

```bash
# templates 폴더가 있는지 확인
ls templates/

# 없으면 다시 설치
```

### 4. 스케줄이 작동 안함

```bash
# Crontab 확인
crontab -l

# 로그 확인
tail -f newsletter_agent.log

# 수동 실행 테스트
python3 newsletter_agent.py --auto
```

## 💡 팁

### 팁 1: 품질 높이기

```yaml
# Claude 사용 (분석력 좋음)
ai_provider: anthropic
ai_model: claude-3-5-sonnet-20241022

# Anthropic API 키 필요
export ANTHROPIC_API_KEY='your-key'
```

### 팁 2: 로컬에서 테스트

```bash
# 저장하지 않고 미리보기만
python3 -c "
from newsletter_agent import NewsletterAgent
agent = NewsletterAgent()
content = agent.auto_generate_newsletter(save=False)
print(content)
"
```

### 팁 3: Slack 알림 받기

```yaml
# newsletter_agent_config.yaml
notifications:
  enabled: true
  slack_webhook: "https://hooks.slack.com/services/..."
```

이제 뉴스레터 생성되면 Slack으로 알림이 옵니다!

## 🎓 AI가 포스트를 어떻게 평가하나요?

AI는 다음 기준으로 0-100점을 매깁니다:

- **최신성** (30점): 최근 포스트일수록 높음
- **완성도** (20점): 제목, 설명, 이미지 모두 있는지
- **주제** (25점): 트렌딩하거나 중요한 주제인지
- **임팩트** (25점): 업계 파급력, 독창성

**점수별 의미:**
- **90-100점**: 매우 중요! Wide Section 추천
- **70-89점**: 중요함. Grid Section 추천  
- **50-69점**: 보통. 다른 게 없으면 선택
- **50점 미만**: 제외

## 🚀 고급 사용법

### Python 코드로 직접 사용

```python
from newsletter_agent import NewsletterAgent

# 에이전트 생성
agent = NewsletterAgent()

# 완전 자동
agent.auto_generate_newsletter()

# 또는 세부 제어
candidates = agent.get_candidate_posts(days=30)
selected = agent.auto_select_posts(candidates)
title = agent.generate_newsletter_title(selected)

content = agent.generate_newsletter_post(
    title=title,
    wide_items=selected['wide_items'],
    grid_items=selected['grid_items']
)

agent.save_newsletter_post(content)
```

### 커스텀 분석 로직

`newsletter_agent.py`의 `analyze_post()` 함수를 수정하면 됩니다.

### 여러 블로그 관리

```bash
# 블로그1
cd ~/blog1
python3 newsletter_agent.py --config blog1_config.yaml --auto

# 블로그2
cd ~/blog2
python3 newsletter_agent.py --config blog2_config.yaml --auto
```

## 📚 더 알아보기

- **영문 상세 가이드**: `README_AGENT.md`
- **기본 사용법**: `README_NEWSLETTER.md`
- **빠른 시작**: `QUICKSTART_KO.md`

## ❓ 자주 묻는 질문

**Q: API 키 없이 사용 가능한가요?**  
A: 자동 선택/요약 기능은 안되지만, 기본 모드(`newsletter_generator.py`)는 가능합니다.

**Q: GPT-4o와 GPT-4o-mini 차이는?**  
A: 4o가 더 똑똑하지만, 4o-mini도 충분히 훌륭하고 10배 저렴합니다.

**Q: 생성된 뉴스레터 수정 가능한가요?**  
A: 네! `_posts/` 폴더의 `.md` 파일을 직접 수정하면 됩니다.

**Q: Wide/Grid 개수 제한은?**  
A: 없습니다! 원하는 만큼 설정하세요.

**Q: 다른 언어도 지원하나요?**  
A: 네! AI가 포스트 언어를 자동 감지합니다.

---

즐거운 블로깅 되세요! 🎉
